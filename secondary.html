<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="assets/img/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

  <title>DAV School System -Icons</title>

  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
  <meta name="viewport" content="width=device-width" />


  <!-- Bootstrap core CSS     -->
  <link href="assets/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Animation library for notifications   -->
  <link href="assets/css/animate.min.css" rel="stylesheet" />

  <!--  Light Bootstrap Table core CSS    -->
  <link href="assets/css/light-bootstrap-dashboard.css?v=1.4.0" rel="stylesheet" />


  <!--  CSS for Demo Purpose, don't include it in your project     -->
  <link href="assets/css/demo.css" rel="stylesheet" />


  <!--     Fonts and icons     -->
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Roboto:400,700,300' rel='stylesheet' type='text/css'>
  <link href="assets/css/pe-icon-7-stroke.css" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />

</head>

<body>
  <div class="wrapper">
    <div class="sidebar" data-image="assets/img/sidebar-5.jpg">

      <!--

    Tip 1: you can change the color of the sidebar using: data-color="blue | azure | green | orange | red | purple"
    Tip 2: you can also add an image using data-image tag

-->

      <div class="sidebar-wrapper"
        style="background:linear-gradient(to bottom, rgb(29, 199, 234) 0%, rgb(29, 199, 234) 59%, rgb(29, 199, 234) 100%), url('assets/img/sidebar-5.jpg')">
        <div class="logo">
          <a href="dashboard.html" class="simple-text">
            My DashBoard
          </a>
        </div>

        <ul class="nav">
          <li>
            <a href="dashboard.html">
              <i class="pe-7s-graph"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li>
            <a href="user.html">
              <i class="pe-7s-user"></i>
              <p>User Profile</p>
            </a>
          </li>
          <li>
            <a href="table.html">
              <i class="pe-7s-note2"></i>
              <p>Circulars/Notice Board</p>
            </a>
          </li>
          <li>
            <a href="form1.html">
              <i class="pe-7s-news-paper"></i>
              <p>Academic Audit</p>
            </a>
          </li>
          <li class="active">
            <a href="icons.html">
              <i class="pe-7s-science"></i>
              <p>Teachers<p>
            </a>
          </li>
          <li>
            <a href="maps.html">
              <i class="pe-7s-map-marker"></i>
              <p>Resource Center</p>
            </a>
          </li>
          <li>
            <a href="qp.html">
              <i class="pe-7s-bell"></i>
              <p>Question Bank</p>
            </a>
          </li>
          <li>
            <a href="olympiad.html">
              <i class="pe-7s-bell"></i>
              <p>Olympiad</p>
            </a>
          </li>
          <li class="active-pro">
            <a href="index.html">
              <i class="pe-7s-rocket"></i>
              <p style="font-size: 1.5rem !important;">GO TO HOME</p>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="main-panel">
      <nav class="navbar navbar-default navbar-fixed">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navigation-example-2">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <div class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-left">
              <li>
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-dashboard"></i>
                  <p class="hidden-lg hidden-md">Dashboard</p>
                </a>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                  <i class="fa fa-globe"></i>
                  <b class="caret hidden-lg hidden-md"></b>
                  <p class="hidden-lg hidden-md">
                    5 Notifications
                    <b class="caret"></b>
                  </p>
                </a>
                <ul class="dropdown-menu">
                  <li><a href="#">Notification 1</a></li>
                  <li><a href="#">Notification 2</a></li>
                  <li><a href="#">Notification 3</a></li>
                  <li><a href="#">Notification 4</a></li>
                  <li><a href="#">Another notification</a></li>
                </ul>
              </li>
              <li>
                <a href="">
                  <i class="fa fa-search"></i>
                  <p class="hidden-lg hidden-md">Search</p>
                </a>
              </li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
              <li>
                <a href="form1.html">
                  <p>Academic Audit</p>
                </a>
              </li>
              <li class="dropdown">
                <a href="teachers.html">
                  <p>
                    Teachers
                  </p>

                </a>
              </li>
              <li>
                <a href="index.html">
                  <p>Back to Home</p>
                </a>
              </li>
              <li>
                <a href="#" id="logout">
                  Log out
                </a>
              </li>
              <li class="separator hidden-lg"></li>
            </ul>
          </div>
        </div>
      </nav>

      <div class="content">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-12">
              <div class="card">
                <div class="header">
                  <h4 class="title">Our Teachers</h4>
                </div>
                <div class="content all-icons">
                  <div id="cont" class="row">
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>
                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>

                    <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="assets/img/imgplaceholder.png" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="%Teacher Name%">
                        <input type="text" value="%Teachers experience%">
                      </div>

                    </div>

                  </div>


                </div>
              </div>
            </div>

          </div>
        </div>

      </div>

      
      
<div class="container">
        <div class="row text-center" style="position: relative;">
          <button class="btn btn-primary" id="addbtn"
            style="display: block; position: absolute; left: 50%; transform: translateX(-50%);">Add
            Teachers</button>
        </div>
        <!-- The Modal -->
        <div id="myModal" class="modal">

          <!-- Modal content -->
          <div class="modal-content">
            <span class="close">&times;</span>
            <h2 class="modal-heading text-center">Add Teacher</h2>
            <section class="modal-form">
              <form method="POST" id="myform">
                <input type="text" id="tname" placeholder="Teacher's Name">
                <input type="text" id="sub" placeholder="Teacher's Subject">
                <input type="text" id="tclass" placeholder="Teacher's class">
                <input type="text" id="tadd" placeholder="Teacher's address">
                <input type="text" id="tcity" placeholder="City">
                <input type="text" id="tstate" placeholder="State">
                <input type="text" id="tpin" placeholder="PinCode">
                <h5>Gender</h5>
                <input type="radio" name="gender" value="male" checked> Male<br>
                <input type="radio" name="gender" value="female"> Female<br>
                <input type="radio" name="gender" value="other"> Other

                <input type="text" id="texp" placeholder="Teacher's experience">
                <input type="text" id="tqual" placeholder="Teacher's Qualification">
                 <input type="text" id="tfather" placeholder="Father's Name">
                  <input type="text" id="tmother" placeholder="Mother's Name">

                <input type="file" name="file" id="file" class="upload" accept="image/x-png,image/gif,image/jpeg" required/>
                <label for="file">Upload Photo</label>
                
                
              </form>
              <button type="submit" class="modal-btn" onclick="addteacher()">Add Teacher</button>
              
            </section>
          </div>

        </div>
      </div>
      <footer class="footer" style="margin-top: 50px;">
        <div class="container-fluid">
          <p class="copyright pull-right">
            &copy;
            <script>document.write(new Date().getFullYear())</script> <a href="https://www.iiysoftware.com/">IIY
              Software</a>, made with <span style="color: red;">&#10084;</span> for a better web
          </p>
        </div>
      </footer>


    </div>
  </div>

  <!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->

  <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-app.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/6.1.0/firebase-storage.js"></script>


  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

  <script type="text/javascript">
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCRTrqrEdRR7hX5dFMU2EM9J4orE2KEe_Y",
      authDomain: "dav-school-system.firebaseapp.com",
      databaseURL: "https://dav-school-system.firebaseio.com",
      projectId: "dav-school-system",
      storageBucket: "gs://dav-school-system.appspot.com/",
      messagingSenderId: "503899193487",
      appId: "1:503899193487:web:4835ed6556887d0c"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    //make auth and firestore references
    const auth = firebase.auth();
    const db = firebase.firestore();
    // Get a reference to the storage service, which is used to create references in your storage bucket
    var store = firebase.storage();

    var schoolname = "test";

    var f = "";
    var queryDict = {};
    location.search.substr(1).split("&").forEach(function(item) {
    queryDict[item.split("=")[0]] = item.split("=")[1];
});

    function addteacher(){
      var name = document.querySelector('#tname').value;
      var sub = document.querySelector('#sub').value;
      var classes = document.querySelector('#tclass').value;
      var add = document.querySelector('#tadd').value;
      var city = document.querySelector('#tcity').value;
      var state = document.querySelector('#tstate').value;
      var pin = document.querySelector('#tpin').value;
      var exp = document.querySelector('#texp').value;
      var qual = document.querySelector('#tqual').value;
      var father = document.querySelector('#tfather').value;
      var mother = document.querySelector('#tmother').value;
      var gender = document.querySelector('input[name="gender"]:checked').value;
      var img = f.name;
      db.collection(queryDict.name+""+queryDict.category).doc().set({
        name,sub,classes,add,city,state,pin,exp,qual,father,mother,gender,img
      });
      
    }


    var file = document.querySelector('#file');
        file.addEventListener('change', (e) => {
            f = e.target.files[0];
            var storageRef = firebase.storage().ref(queryDict.name+""+queryDict.category+'/'+f.name);
            storageRef.put(f);
        });

var image = "";
    function showteachers(){
      var docRef = db.collection(queryDict.name+""+queryDict.category);
      docRef.get().then(querySnapshot => {
        querySnapshot.docs.forEach(doc => {
          var cont = document.querySelector('#cont');
          var storageRef = firebase.storage().ref(queryDict.name+""+queryDict.category+'/'+doc.data()['img']);
        
        storageRef.getDownloadURL().then(function(url) {
        console.log(url); 
        image = url;

        cont.innerHTML += `
          <div class="font-icon-list col-lg-2 col-md-3 col-sm-4 col-xs-6 col-xs-6">
                      <div class="font-icon-detail">
                        <img src="`+image+`" style="width: 100%; height:100%; padding-top: 0px;" />
                        <input type="text" value="`+doc.data()['name']+`">
                        <input type="text" value="`+doc.data()['exp']+`">
                      </div>
                    </div>
          `;


        }).catch(function(error) {

        switch (error.code) {
            case 'storage/object-not-found':
            console.log(error.code);
            break;
            case 'storage/unauthorized':
            console.log(error.code);
            break;
            case 'storage/canceled':
            console.log(error.code);
            break;
            case 'storage/unknown':
            console.log(error.code);
            break;
            default: console.log(error.code);
        }
        });  
        
        })
      });
    }






    //for auth listener
    auth.onAuthStateChanged(user => {
      if (user) {
        showteachers();
      }
      else {
        console.log('user logged out');
        window.location = 'index.html';
      }
    });

    //for logout user
    const logout = document.querySelector('#logout');
    logout.addEventListener('click', (e) => {
      e.preventDefault();
      auth.signOut().then(() => {
        window.location = 'index.html';
        window.alert('User signed Out Successfully');
      });
    });

    // Get the modal
    var modal = document.getElementById("myModal");

    // Get the button that opens the modal
    var btn = document.getElementById("addbtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks the button, open the modal 
    btn.onclick = function () {
      modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function (event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

  </script>

</body>

<!--   Core JS Files   -->
<script src="assets/js/jquery.3.2.1.min.js" type="text/javascript"></script>
<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>

<!--  Charts Plugin -->
<script src="assets/js/chartist.min.js"></script>

<!--  Notifications Plugin    -->
<script src="assets/js/bootstrap-notify.js"></script>

<!-- Light Bootstrap Table Core javascript and methods for Demo purpose -->
<script src="assets/js/light-bootstrap-dashboard.js?v=1.4.0"></script>

<!-- Light Bootstrap Table DEMO methods, don't include it in your project! -->
<script src="assets/js/demo.js"></script>


</html>